{% extends 'layout.html.twig' %}
{% set active = 'dashboard' %}

{% block content %}
<div id="chart_div" style="width: 900px; height: 500px;"></div>
<div id="visualization"></div>
<div id="visualization2"></div>
{% endblock %}

{% block afterscript %}

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Day', 'Temp', 'Expenses'],
          ['2004',  1000,      400],
          ['2005',  1170,      460],
          ['2006',  660,       1120],
          ['2007',  1030,      540]
        ]);

        var options = {
          title: 'Température',
          hAxis: {title: 'Jour', titleTextStyle: {color: 'red'}}
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  
     <script type="text/javascript"> 
  /*$.ajax({
		url: 'http://api.openweathermap.org/data/2.5/forecast?q=montreal,us&units=metric',
		data: "",
		success: function(resultData){
			console.log(resultData);
			$('#visualization').html('testes');                                                
		}
	}); */ 
	var url = 'http://api.openweathermap.org/data/2.5/forecast?q=montreal,us&units=metric';
	//function drawChart() {
		var test='';
      $.ajax({
		url: url,
		data: "",
		success: function(resultData){		
			console.log(resultData);
			$('#visualization').html('testes');                                                
		}
		});
		
		var jsonData = $.ajax({
		url: url,
		dataType:"json",
          async: false
		}).responseText;
		$('#visualization2').html(jsonData); 
		
		$.getJSON(url, function (json) {
			 var city = json.city.name;
			console.log('city : ', city);
			
			var dt_txt = json.list[0].dt_txt;
			console.log('dt_txt : ', dt_txt);
			
			var temp = json.list[0].main.temp;
			console.log('temp : ', temp);
		});
          
      // Create our data table out of JSON data loaded from server.
      //var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      //var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      //chart.draw(data, {width: 400, height: 240});
    //}
  
</script>

{% endblock %}